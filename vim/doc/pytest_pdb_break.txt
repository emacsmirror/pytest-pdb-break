

*pytest_pdb_break.txt*            For Nvim and Vim 8         Updated: 2018 Dec

An example Vim integration.


Commands~

:PytestBreakHere {args}

    Run the test containing the cursor (in pytest PDB mode) and break at the
    current line. Any {args} are passed on to pytest. For example, this will
    cancel out addopts in your pytest ini: `:PytestBreakHere -o addopts=`

Overrides~

b:pytest_pdb_break_pytest_exe

    Use this pytest executable instead of looking in PATH.

g:pytest_pdb_break_alt_lib

    File-system path to an alternate installation location. Set this when
    using "editable" installations installed via `pip install -e $repo` or
    `setup.py develop` . Otherwise, changes to Python source files won't be
    reflected when (re)running the main command.

g:pytest_pdb_break_overrides

    Most autoloaded funcs can be overridden. For example, a general-purpose
    runner (no PDB):
>
    function s:PytestRunner(...)
        let cmdline = ['pytest'] + a:000
        function! g:pytest_pdb_break_overrides.runner(...) closure
            call add(cmdline, self.get_node_id())
            return self.split(cmdline, {})
        endfunction
        try
            call pytest_pdb_break#run()
        finally
            unlet g:pytest_pdb_break_overrides.runner
        endtry
    endfunction

    autocmd FileType python
        \ nnoremap <buffer> <F5> :call <SID>PytestRunner('-x', '-v')<cr>
<
 vim:ft=help
